{
  "db": "PostgreSQL",
  "093cab8295ce99d155d6d822d3f7668c37e56261bde3e8f9ff60690e45181b9e": {
    "describe": {
      "columns": [
        {
          "name": "id: TaskId",
          "ordinal": 0,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Int4",
          "Int4"
        ]
      }
    },
    "query": "\n                DELETE FROM\n                    tasks t\n                WHERE\n                    t.id = $2 AND\n                    (\n                        t.responsible_user_id = $1 OR\n                        EXISTS (\n                            SELECT\n                            FROM\n                                tasks_groups tg\n                            INNER JOIN\n                                users_groups ug ON\n                                    ug.group_id = tg.group_id AND\n                                    ug.user_id = $1\n                            WHERE\n                                tg.task_id = $2\n                        )\n                    )\n                RETURNING\n                    id as \"id: TaskId\"\n            "
  },
  "28f34b70b7203e26f7237f272f78606db86aeb0864056c0591c1d852a6b28cad": {
    "describe": {
      "columns": [
        {
          "name": "id: TaskId",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "title",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "completed_at",
          "ordinal": 2,
          "type_info": "Timestamp"
        },
        {
          "name": "start_date",
          "ordinal": 3,
          "type_info": "Date"
        },
        {
          "name": "end_date",
          "ordinal": 4,
          "type_info": "Date"
        },
        {
          "name": "responsible_id: UserId",
          "ordinal": 5,
          "type_info": "Int4"
        },
        {
          "name": "responsible_name",
          "ordinal": 6,
          "type_info": "Text"
        },
        {
          "name": "responsible_picture_url",
          "ordinal": 7,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        true,
        true,
        true,
        true,
        false,
        false,
        true
      ],
      "parameters": {
        "Left": [
          "Int4"
        ]
      }
    },
    "query": "\n                SELECT\n                    t.id as \"id: TaskId\",\n                    t.title,\n                    t.completed_at,\n                    t.start_date,\n                    t.end_date,\n                    u.id as \"responsible_id: UserId\",\n                    u.name as responsible_name,\n                    u.picture_url as responsible_picture_url\n                FROM\n                    tasks t\n                INNER JOIN\n                    users u ON\n                        u.id = t.responsible_user_id\n                WHERE\n                    t.id = $1\n            "
  },
  "2e076dc7d82692217beb0dab13f1ca7246b3b4d0589100f484f2bc77d6081881": {
    "describe": {
      "columns": [
        {
          "name": "id: TaskId",
          "ordinal": 0,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Int4",
          "Text",
          "Date",
          "Date"
        ]
      }
    },
    "query": "\n                INSERT INTO tasks (\n                    responsible_user_id,\n                    title,\n                    start_date,\n                    end_date\n                )\n                VALUES (\n                    $1,\n                    $2,\n                    $3,\n                    $4\n                )\n                RETURNING\n                    id as \"id: TaskId\"\n            "
  },
  "4ebe4f8512bab12d12bef9622cb8a2abd1dcb7d4b346f24317888a669ac1019b": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Int4"
        ]
      }
    },
    "query": "\n                DELETE FROM\n                    groups g\n                WHERE\n                    id = $1 AND\n                    NOT EXISTS (\n                        SELECT\n                        FROM\n                            users_groups ug\n                        WHERE\n                            ug.group_id = g.id\n                    )\n            "
  },
  "53191d234a2539487fb1b2db70a760758cecf24b5d287e3a05b2cbf583d6d4de": {
    "describe": {
      "columns": [
        {
          "name": "id: TaskId",
          "ordinal": 0,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Int4",
          "Int4",
          "Text",
          "Date",
          "Date",
          "Int4"
        ]
      }
    },
    "query": "\n                UPDATE\n                    tasks t\n                SET\n                    title = $3,\n                    start_date = $4,\n                    end_date = $5,\n                    responsible_user_id = $6\n                WHERE\n                    t.id = $2 AND\n                    (\n                        t.responsible_user_id = $1 OR\n                        EXISTS (\n                            SELECT\n                            FROM\n                                tasks_groups tg\n                            INNER JOIN\n                                users_groups ug ON\n                                    ug.group_id = tg.group_id AND\n                                    ug.user_id = $1\n                            WHERE\n                                tg.task_id = $2\n                        )\n                    ) AND\n                    (\n                        $6 = $1 OR\n                        EXISTS (\n                            SELECT\n                            FROM\n                                tasks_groups tg\n                            INNER JOIN\n                                users_groups ug ON\n                                    ug.group_id = tg.group_id AND\n                                    ug.user_id = $6\n                            WHERE\n                                tg.task_id = $2\n                        )\n                    )\n                RETURNING\n                    id as \"id: TaskId\"\n            "
  },
  "6ce4ba473682291f826b9ce5d2294132014c9b7948993827ca9e5ffa34355523": {
    "describe": {
      "columns": [
        {
          "name": "id: UserId",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "uid",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "name",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "picture_url",
          "ordinal": 3,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        true
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Text"
        ]
      }
    },
    "query": "\n                INSERT INTO users (\n                    uid,\n                    name,\n                    picture_url\n                )\n                VALUES (\n                    $1,\n                    $2,\n                    $3\n                )\n                ON CONFLICT (uid) DO UPDATE SET\n                    name = EXCLUDED.name,\n                    picture_url = EXCLUDED.picture_url\n                RETURNING\n                    id as \"id: UserId\",\n                    uid,\n                    name,\n                    picture_url\n            "
  },
  "750bfbbfcf1c2d3892e33262053754b11b89583d3c9f39cdf1b5bf4dcad9a3d8": {
    "describe": {
      "columns": [
        {
          "name": "id: GroupId",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "title",
          "ordinal": 1,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int4"
        ]
      }
    },
    "query": "\n                SELECT\n                    g.id as \"id: GroupId\",\n                    g.title\n                FROM\n                    groups g\n                INNER JOIN\n                    users_groups ug ON\n                        ug.group_id = g.id\n                WHERE\n                    ug.user_id = $1\n            "
  },
  "75b91b71d0393dffce807e6ccd0bd40de85b88ada9d9d496ed3b1a95ebc8b6a4": {
    "describe": {
      "columns": [
        {
          "name": "id: UserId",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "uid",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "name",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "picture_url",
          "ordinal": 3,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        true
      ],
      "parameters": {
        "Left": [
          "Int4",
          "Int4"
        ]
      }
    },
    "query": "\n                SELECT\n                    u.id as \"id: UserId\",\n                    u.uid,\n                    u.name,\n                    u.picture_url\n                FROM\n                    users u\n                INNER JOIN\n                    users_groups ug ON\n                        ug.user_id = u.id\n                WHERE\n                    ug.group_id = $2 AND\n                    EXISTS (\n                        SELECT\n                        FROM\n                            users_groups viewer_groups\n                        WHERE\n                            viewer_groups.user_id = $1 AND\n                            viewer_groups.group_id = $2\n                    )\n            "
  },
  "8221e03847bc8f03d55fd449f3830f2a745c6d043bb31eba8c02bef6ace3386d": {
    "describe": {
      "columns": [
        {
          "name": "id: GroupId",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "title",
          "ordinal": 1,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int4",
          "Int4",
          "Text"
        ]
      }
    },
    "query": "\n                UPDATE\n                    groups g\n                SET\n                    title = $3\n                WHERE\n                    g.id = $2 AND\n                    EXISTS (\n                        SELECT\n                        FROM\n                            users_groups ug\n                        WHERE\n                            ug.group_id = g.id AND\n                            ug.user_id = $1\n                    )\n                RETURNING\n                    id as \"id: GroupId\",\n                    title\n            "
  },
  "9687225fe52e8bc5e02a6fe79037279549b81536c52c02c0b23ee8363cf00c2d": {
    "describe": {
      "columns": [
        {
          "name": "id: TaskId",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "completed_at",
          "ordinal": 1,
          "type_info": "Timestamp"
        }
      ],
      "nullable": [
        false,
        true
      ],
      "parameters": {
        "Left": [
          "Int4",
          "Int4",
          "Bool"
        ]
      }
    },
    "query": "\n                UPDATE\n                    tasks t\n                SET\n                    completed_at = CASE\n                        WHEN $3 THEN CURRENT_TIMESTAMP AT TIME ZONE 'UTC'\n                        ELSE NULL\n                    END\n                WHERE\n                    t.id = $2 AND\n                    (\n                        t.responsible_user_id = $1 OR\n                        EXISTS (\n                            SELECT\n                            FROM\n                                tasks_groups tg\n                            INNER JOIN\n                                users_groups ug ON\n                                    ug.group_id = tg.group_id AND\n                                    ug.user_id = $1\n                            WHERE\n                                tg.task_id = $2\n                        )\n                    )\n                RETURNING\n                    id as \"id: TaskId\",\n                    completed_at\n            "
  },
  "9c98577273e61dcc06b99b0d9142ab117994d5b7b88957633dfbc1891ab127d7": {
    "describe": {
      "columns": [
        {
          "name": "id: TaskId",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "title",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "completed_at",
          "ordinal": 2,
          "type_info": "Timestamp"
        },
        {
          "name": "start_date",
          "ordinal": 3,
          "type_info": "Date"
        },
        {
          "name": "end_date",
          "ordinal": 4,
          "type_info": "Date"
        },
        {
          "name": "responsible_id: UserId",
          "ordinal": 5,
          "type_info": "Int4"
        },
        {
          "name": "responsible_name",
          "ordinal": 6,
          "type_info": "Text"
        },
        {
          "name": "responsible_picture_url",
          "ordinal": 7,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        true,
        true,
        true,
        true,
        false,
        false,
        true
      ],
      "parameters": {
        "Left": [
          "Int4"
        ]
      }
    },
    "query": "\n                SELECT\n                    t.id as \"id: TaskId\",\n                    t.title,\n                    t.completed_at,\n                    t.start_date,\n                    t.end_date,\n                    u.id as \"responsible_id: UserId\",\n                    u.name as responsible_name,\n                    u.picture_url as responsible_picture_url\n                FROM\n                    tasks t\n                INNER JOIN\n                    users u ON\n                        u.id = t.responsible_user_id\n                WHERE\n                    (\n                        t.completed_at IS NULL OR\n                        t.completed_at > CURRENT_TIMESTAMP - INTERVAL '1 day'\n                    ) AND\n                    (\n                        t.responsible_user_id = $1 OR\n                        EXISTS (\n                            SELECT\n                            FROM\n                                tasks_groups tg\n                            INNER JOIN\n                                users_groups ug ON\n                                    ug.group_id = tg.group_id AND\n                                    ug.user_id = $1\n                            WHERE\n                                tg.task_id = t.id\n                        )\n                    )\n            "
  },
  "bb6f480e6ba0f41c183e174899512895064c8aad1ec47055c94dcbb8b6caeba7": {
    "describe": {
      "columns": [
        {
          "name": "id: GroupId",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "title",
          "ordinal": 1,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "\n                INSERT INTO groups (\n                    title\n                )\n                VALUES (\n                    $1\n                )\n                RETURNING\n                    id as \"id: GroupId\",\n                    title\n            "
  },
  "c42b3fe3bb44ec88e797bcba34bd09e399ee1feb4f61f847a77b21f95cf0ab9e": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Int4",
          "Int4"
        ]
      }
    },
    "query": "\n                DELETE FROM\n                    users_groups ug\n                WHERE\n                    ug.user_id = $1 AND\n                    ug.group_id = $2\n            "
  },
  "c69f2e7d3374e4881e9f0b7d13351e8646b318f1d4e3563545921190a8341f11": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Int4",
          "Int4"
        ]
      }
    },
    "query": "\n                INSERT INTO users_groups (\n                    user_id,\n                    group_id\n                )\n                VALUES (\n                    $1,\n                    $2\n                )\n            "
  },
  "fb96380621e3048061609e3559381bbd403769f8caa2b0afa4235ce2d791936d": {
    "describe": {
      "columns": [
        {
          "name": "id: UserId",
          "ordinal": 0,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "\n                INSERT INTO users (\n                    uid,\n                    name\n                )\n                VALUES (\n                    $1,\n                    '?'\n                )\n                ON CONFLICT (uid) DO UPDATE SET\n                    -- No-op to allow RETURNING\n                    uid = EXCLUDED.uid\n                RETURNING\n                    id as \"id: UserId\"\n            "
  }
}